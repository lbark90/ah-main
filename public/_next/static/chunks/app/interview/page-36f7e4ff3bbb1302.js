(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{4135:function(e,t,o){Promise.resolve().then(o.bind(o,5441))},5441:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return u}});var n=o(7437),r=o(2265),s=o(9376),i=o(2084),a=o(536);function c(e){let{questionIndex:t}=e,{user:o}=(0,i.a)(),{addRecording:s,getCurrentQuestionRecording:c}=(0,a.z)(),[l,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[y,m]=(0,r.useState)(null),[p,g]=(0,r.useState)(""),f=(0,r.useRef)(null),x=(0,r.useRef)([]),v=(0,r.useRef)(null),[b,w]=(0,r.useState)({}),[S,L]=(0,r.useState)(!0),[k,N]=(0,r.useState)(!1),I=c?c():null,R=!!I&&!!I.audioUrl;(0,r.useEffect)(()=>{let e=document.querySelector(".audio-player-container");if(e&&(y||R)){var t;(null===(t=e.textContent)||void 0===t?void 0:t.includes("No recording available"))&&(e.innerHTML="")}},[y,R]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{m(null),g(""),v.current&&(URL.revokeObjectURL(v.current),v.current=null);let r=document.querySelector(".audio-player-container");if(r&&(r.innerHTML=""),(null==I?void 0:I.audioUrl)&&r&&e){let e=document.createElement("audio");e.src=I.audioUrl,e.controls=!0,e.className="w-full mt-4",r.appendChild(e);return}if(y&&r){let e=URL.createObjectURL(y);v.current=e;let t=document.createElement("audio");t.src=e,t.controls=!0,t.className="w-full mt-4",r.appendChild(t);return}if(R&&r){let e=document.createElement("audio");e.src=I.audioUrl,e.controls=!0,e.className="w-full mt-4",r.innerHTML="",r.appendChild(e);return}if(o&&r&&e&&!y&&!R){var n;let s=o.id||(null===(n=o.email)||void 0===n?void 0:n.split("@")[0]),i="/api/audio/".concat(s,"/").concat(t+1);r.innerHTML='\n            <div class="flex items-center justify-center p-4 text-slate-400">\n              <svg class="animate-spin h-5 w-5 mr-3" viewBox="0 0 24 24">\n                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"/>\n                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>\n              </svg>\n              Loading audio...\n            </div>\n          ';let a=document.createElement("audio");a.src=i,a.controls=!0,a.style.width="100%",a.style.marginTop="1rem",a.style.display="none",a.addEventListener("loadeddata",()=>{r&&e&&(r.innerHTML="",a.style.display="block",r.appendChild(a),v.current=i)}),a.addEventListener("error",t=>{r&&e&&(r.innerHTML='\n                <div class="text-center text-slate-400 p-4">\n                  No recording available for this question\n                </div>\n              ',t.error&&console.error("Audio loading error:",t.error))}),r.appendChild(a)}}catch(e){console.error("Error loading question audio:",e)}})(),()=>{e=!1,v.current&&!y&&URL.revokeObjectURL(v.current)}},[t,o,y,R,I]),(0,r.useEffect)(()=>{L(!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia))},[]);let j=async()=>{try{if(!window.isSecureContext)throw Error("Audio recording requires a secure context (HTTPS or localhost)");let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"});f.current=t,x.current=[],t.ondataavailable=e=>{e.data.size>0&&x.current.push(e.data)},t.start(),d(!0)}catch(t){console.error("Error starting recording:",t),console.log("Error details:",t);let e=t instanceof Error?t.message:"Unable to access microphone";h("".concat(e,". Please ensure you have granted microphone permissions in your browser settings."))}},C=async()=>{f.current&&o&&(f.current.onstop=async()=>{try{if(console.log("Recording stopped, processing audio..."),0===x.current.length){console.error("No audio chunks recorded"),h("No audio data was captured. Please try again.");return}let e=new Blob(x.current,{type:"audio/webm"});if(console.log("Created audio blob of size:",e.size,"bytes"),m(e),d(!1),!o){h("No user found - please log in");return}if(!e||0===e.size){h("No recording data captured - please try again");return}console.log("Audio chunks collected:",x.current.length),x.current.forEach((e,t)=>{console.log("Chunk ".concat(t," size: ").concat(e.size," bytes"))});try{let n;let r=o.id;console.log("Using user ID for recording: ".concat(r));let i=new FormData;i.append("audio",e,"recording.webm"),i.append("questionIndex",(t+1).toString()),i.append("username",r),i.append("type","recording"),i.append("convertToMp3","true");try{let e=await fetch("/api/storage/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,questionIndex:t+1,type:"recording"})});await e.text()}catch(e){console.error("Error during delete operation:",e)}for(let e of(console.log("FormData fields:"),i.entries())){let t=e[1];t instanceof Blob||t instanceof File?console.log("".concat(e[0],": [Blob/File] size=").concat(t.size," type=").concat(t.type)):console.log("".concat(e[0],": ").concat(e[1]))}console.log("Sending actual upload request..."),console.log("Uploading audio for user ".concat(r,", question ").concat(t+1)),console.log("Audio blob size: ".concat(e.size," bytes, type: ").concat(e.type));let a=await fetch("/api/storage/upload",{method:"POST",body:i}),c=await a.text();console.log("Raw server response:",c);try{n=JSON.parse(c),console.log("Parsed server response:",n)}catch(e){throw console.error("Failed to parse server response as JSON:",e),Error("Server returned invalid JSON: ".concat(c))}if(!a.ok||!n.success)throw Error("Upload failed: ".concat(n.error||a.statusText));let l=URL.createObjectURL(e);v.current=l;let d=document.createElement("audio");d.src=l,d.controls=!0,d.className="w-full mt-4";let u=document.querySelector(".audio-player-container");if(u&&(u.innerHTML="",u.appendChild(d)),n.success){let e={id:"recording_".concat(t,"_").concat(Date.now()),questionIndex:t,audioUrl:l,transcript:p||"",timestamp:new Date().toISOString()};console.log("Saving recording to context:",e),s(e),console.log("Recording saved to interview context")}}catch(t){console.error("Error uploading recording:",t);let e=t instanceof Error?t.message:"Unknown upload error";h("Error uploading recording: ".concat(e))}}catch(t){console.error("Error saving recording:",t);let e=t instanceof Error?t.message:"Unknown error occurred";h("Error saving recording: ".concat(e))}},f.current.stop(),f.current.stream&&f.current.stream.getTracks().forEach(e=>e.stop()))};return(0,n.jsxs)("div",{className:"space-y-4",children:[!S&&(0,n.jsx)("div",{className:"bg-red-500/10 text-red-500 p-4 rounded-lg mb-4",children:"Your browser does not support audio recording. Please try using a modern browser like Chrome or Firefox."}),(0,n.jsx)("div",{className:"flex justify-center space-x-4",children:l?(0,n.jsx)("button",{onClick:C,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded",children:"Stop Recording"}):(0,n.jsx)("button",{onClick:j,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"Start Recording"})}),(0,n.jsx)("div",{className:"audio-player-container"}),u&&(0,n.jsx)("div",{className:"text-red-500",children:u})," ",(null==I?void 0:I.transcript)&&(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsxs)("div",{className:"bg-slate-600/50 p-4 rounded-lg",children:[(0,n.jsx)("h4",{className:"text-md font-medium mb-2",children:"Transcript:"}),(0,n.jsx)("p",{className:"text-slate-300",children:I.transcript})]})})]})}function l(e){let{isOpen:t,onClose:o,onConfirm:r,title:s,message:i}=e;return t?(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,n.jsxs)("div",{className:"bg-slate-800 p-6 rounded-lg max-w-md w-full border border-slate-700",children:[(0,n.jsx)("h2",{className:"text-xl font-medium mb-4",children:s}),(0,n.jsx)("p",{className:"text-slate-300 mb-6",children:i}),(0,n.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,n.jsx)("button",{onClick:o,className:"px-4 py-2 text-slate-300 hover:text-white transition-colors",children:"Cancel"}),(0,n.jsx)("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Confirm"})]})]})}):null}let d=[{section:"Life Overview",text:"Share a story about your earliest memory."},{section:"Life Overview",text:"Share a story about where you grew up and what it was like."},{section:"Life Overview",text:"Share a story about your parents or grandparents that influenced you deeply"},{section:"Life Overview",text:"Share a story about a family tradition that meant a lot to you."},{section:"Life Overview",text:"Share a story about a time your felt most at peace with your life"},{section:"Life Overview",text:"Share a story about a life lesson you learned the hard way."},{section:"Life Overview",text:"Share a story about Something you're most proud of in your life."},{section:"Life Overview",text:"Share a stroy about your biggest regret."},{section:"Life Overview",text:"Share a story about a moment when you felt truly happy."},{section:"Life Overview",text:"Share a story about your closest childhood friend and what you did together."},{section:"Childhood and Family Life",text:"What role did play and imagination have in your childhood?"},{section:"Childhood and Family Life",text:"Who was your favorite teacher or mentor as a child, and how did they influence you?"},{section:"Childhood and Family Life",text:"What did you fear most as a child, and how did you overcome it?"},{section:"Childhood and Family Life",text:"Can you describe the neighborhood where you grew up?"},{section:"Childhood and Family Life",text:"What was the mischievous thing you ever did as a kid?"},{section:"Childhood and Family Life",text:"Share a story about your siblings, if you had any."},{section:"Childhood and Family Life",text:"Share a story about a family meal that stands out in your memory."},{section:"Childhood and Family Life",text:"Share a story about your children, grandchildren or niece's or nephew's that fills you with pride."},{section:"Childhood and Family Life",text:"Share a story about a family pet and what it meant to you."},{section:"Childhood and Family Life",text:"Share a story about how you celebrated birthdays with your family."},{section:"Love and Relationships",text:"What qualities did you most admire in your romantic partners?"},{section:"Love and Relationships",text:"Share a story about a time you fell in love."},{section:"Love and Relationships",text:"Share a story about your wedding day or the first big love of your life."},{section:"Love and Relationships",text:"How did you navigate conflicts in your relationships?"},{section:"Love and Relationships",text:"Share a story about a misunderstanding with someone you loved and how it was resolved."},{section:"Love and Relationships",text:"What role has forgiveness played in your relationships?"},{section:"Love and Relationships",text:"Share a story about an unexpected joy in your relationship."},{section:"Love and Relationships",text:"What advice would you give someone entering into a new relationship?"},{section:"Love and Relationships",text:"Share a story about a time your heart was broken and how you healed."},{section:"Love and Relationships",text:"How do you want to be remembered by those you loved?"},{section:"Success, Failure and Personal Growth",text:"Share a story about a personal accomplishment you're most proud of."},{section:"Success, Failure and Personal Growth",text:"Share a story about a failure you experienced and how you overcame it."},{section:"Success, Failure and Personal Growth",text:"Share a story about your biggest career success."},{section:"Success, Failure and Personal Growth",text:"Share a story about a time you took a big risk."},{section:"Success, Failure and Personal Growth",text:"Share a story about how you handled criticism or rejection."},{section:"Success, Failure and Personal Growth",text:"How have you changed your mind about something significant in your life?"},{section:"Success, Failure and Personal Growth",text:"What's the most profound insight you've gained about life?"},{section:"Success, Failure and Personal Growth",text:"How did you learn the value of kindness?"},{section:"Success, Failure and Personal Growth",text:"How did failure shape your understanding of success?"},{section:"Success, Failure and Personal Growth",text:"What's the hardest truth you've ever had to accept?"},{section:"Work, Career and Business",text:"What did you enjoy most about the work you did?"},{section:"Work, Career and Business",text:"Share a story about your first job and what you learned from it."},{section:"Work, Career and Business",text:"Share a story about a mentor who influenced your career."},{section:"Work, Career and Business",text:"What challenges did you face as a leader or team member?"},{section:"Work, Career and Business",text:"How did your work-life balance evolve over time?"},{section:"Work, Career and Business",text:"What was your most significant career decision?"},{section:"Work, Career and Business",text:"Share a story about a tough work situation you handled well."},{section:"Work, Career and Business",text:"How did you inspire others in the workplace?"},{section:"Work, Career and Business",text:"What advice would you give to someone starting in your profession?"},{section:"Work, Career and Business",text:"What is something you worked on that made a lasting impact?"},{section:"Spirituality, Beliefs and Philosophy",text:"What do you think happens after we die?"},{section:"Spirituality, Beliefs and Philosophy",text:"How do you find peace during times of uncertainty?"},{section:"Spirituality, Beliefs and Philosophy",text:"What spiritual or philosophical beliefs guided your life"},{section:"Spirituality, Beliefs and Philosophy",text:"How did your beliefs evolve over time?"},{section:"Spirituality, Beliefs and Philosophy",text:"Share a story about a moment when you felt connected to something greater than yourself."},{section:"Spirituality, Beliefs and Philosophy",text:"What personal rituals or practices brought you the most comfort?"},{section:"Spirituality, Beliefs and Philosophy",text:"What role has gratitude played in your life? "},{section:"Spirituality, Beliefs and Philosophy",text:"How do you define wisdom?"},{section:"Spirituality, Beliefs and Philosophy",text:"What advice would you give about finding meaning in life?"},{section:"Spirituality, Beliefs and Philosophy",text:"What do you believe is the meaning of life?"},{section:"Hobbies, Interests and Passions",text:"What hobbies or interests brought you the most joy?"},{section:"Hobbies, Interests and Passions",text:"How did you discover your favorite pastime?"},{section:"Hobbies, Interests and Passions",text:"Share a story about a creative project you were especially proud of."},{section:"Hobbies, Interests and Passions",text:"What role did music, art, or literature play in your life?"},{section:"Hobbies, Interests and Passions",text:"Share a story about a time your passion brought you joy."},{section:"Hobbies, Interests and Passions",text:"What's a skill or talent you developed that others may not know about?"},{section:"Hobbies, Interests and Passions",text:"Can you share a story about how your expressed your creativity?"},{section:"Hobbies, Interests and Passions",text:"How did you use your hobbies to connect with others?"},{section:"Hobbies, Interests and Passions",text:"What's a competition or event you participated in that stood out?"},{section:"Hobbies, Interests and Passions",text:"If you could write a book about your life, what would the title be?"},{section:"Adversity, Resilience, and Lessons Learned",text:"Share a story about the hardest loss you ever faced."},{section:"Adversity, Resilience, and Lessons Learned",text:"How did you stay hopeful during difficult times?."},{section:"Adversity, Resilience, and Lessons Learned",text:"Can you share a story about a time you were underestimated?"},{section:"Adversity, Resilience, and Lessons Learned",text:"What was the toughest decision you ever had to make?"},{section:"Adversity, Resilience, and Lessons Learned",text:"How did you bounce back from a major setback?"},{section:"Adversity, Resilience, and Lessons Learned",text:"How did humor help you through tough times?"},{section:"Adversity, Resilience, and Lessons Learned",text:"What was the most unexpected thing you've ever done?"},{section:"Adversity, Resilience, and Lessons Learned",text:"Share a story about finding strength when you needed it most."},{section:"Adversity, Resilience, and Lessons Learned",text:"What was an unexpected event that turned out to be a blessing?"},{section:"Adversity, Resilience, and Lessons Learned",text:"What's a question you wish people would ask you?"},{section:"Life Legacy and Impact",text:"How would you like your family to celebrate your memory?"},{section:"Life Legacy and Impact",text:"What traditions would you like to see carried on after you're gone?"},{section:"Life Legacy and Impact",text:"What's the most important lesson you want future generations to learn?"},{section:"Life Legacy and Impact",text:"How do you think your story will inspire others?"},{section:"Life Legacy and Impact",text:"What would you say to someone living 100 years from now?"},{section:"Life Legacy and Impact",text:"What legacy do you hope to leave behind?"},{section:"Life Legacy and Impact",text:"How would you summarize your journey in one sentence?"},{section:"Life Legacy and Impact",text:"What's something you wish you'd done differently?"},{section:"Life Legacy and Impact",text:"How would you define a 'good life'?"},{section:"Life Legacy and Impact",text:"What's the most beautiful thing you've ever experienced?"},{section:"Final Reflections",text:"What's a story you've never told anyone before?"},{section:"Final Reflections",text:"What's a single word that sums up your life?"},{section:"Final Reflections",text:"How do you think others see you, and do you agree?"},{section:"Final Reflections",text:"What's a dream you pursued just for fun?"},{section:"Final Reflections",text:"What advancements do you wish you could have lived to see?"},{section:"Final Reflections",text:"If you had unlimited time and resources, what would you have loved to do?"},{section:"Final Reflections",text:"What's the funniest thing that ever happened to you?"},{section:"Final Reflections",text:"How did you reconcile the past with the present?"},{section:"Final Reflections",text:"What's the best piece of advice you've ever given?"},{section:"Final Reflections",text:"What question do you think I should have asked, and how would you answer it?"}];function u(){let{user:e}=(0,i.a)(),t=(0,s.useRouter)(),{currentSession:o,startNewSession:u,getCurrentQuestionRecording:h,goToNextQuestion:y,goToPreviousQuestion:m,completeSession:p}=(0,a.z)(),[g,f]=(0,r.useState)(null),[x,v]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{e&&o||(async()=>{try{let t=await fetch("/api/storage/list?user=".concat(encodeURIComponent((null==e?void 0:e.email)||"")));if(!t.ok)throw Error("Failed to fetch recordings");await t.json(),u()}catch(e){console.error("Error:",e),u()}})()},[e,o,u]),!o||!d)return null;h();let b=(null==o?void 0:o.questionIndex)||0;return(0,n.jsx)("div",{className:"interview-container",children:(0,n.jsx)("main",{className:"container mx-auto px-4 py-12",children:(0,n.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,n.jsxs)("div",{className:"bg-slate-800/50 p-8 rounded-lg border border-slate-700 mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-light mb-6 text-center",children:"Your Life Story Interview"}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-xl text-blue-400",children:"Current Question:"}),(0,n.jsxs)("span",{className:"text-slate-400",children:[d.length-o.questionIndex-1," ","questions remaining"]})]}),(0,n.jsx)("h3",{className:"text-xl text-blue-300 mb-2",children:d[o.questionIndex].section}),(0,n.jsx)("p",{className:"text-2xl font-light",children:d[o.questionIndex].text})]}),(0,n.jsx)(c,{questionIndex:o.questionIndex}),(0,n.jsxs)("div",{className:"mt-8 flex justify-center items-center gap-4",children:[(0,n.jsx)("button",{onClick:()=>{b>0&&m()},disabled:0===o.questionIndex,className:"px-6 py-2 rounded-md bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous Question"}),(0,n.jsx)("button",{onClick:()=>v(!0),className:"px-6 py-2 bg-slate-600 hover:bg-slate-500 rounded-md transition-colors",children:"Skip to End"}),(0,n.jsx)(l,{isOpen:x,onClose:()=>v(!1),onConfirm:()=>{v(!1),p(),t.push("/success")},title:"Skip to End",message:"Are you sure you want to skip to the end? Any unrecorded answers will be left blank."}),o.questionIndex===d.length-1?(0,n.jsx)("button",{onClick:()=>t.push("/api/audio/".concat((null==e?void 0:e.id)||(null==e?void 0:e.email),"/").concat(o.questionIndex+1)),className:"bg-green-500 hover:bg-green-600 px-6 py-3 rounded-md transition-colors",children:"Submit Answers"}):(0,n.jsx)("button",{onClick:()=>{b<d.length-1&&y()},disabled:o.questionIndex===d.length-1,className:"px-6 py-2 rounded-md bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next Question"})]})]})})})})}},536:function(e,t,o){"use strict";o.d(t,{c:function(){return a},z:function(){return c}});var n=o(7437),r=o(2265),s=o(9239);let i=(0,r.createContext)({currentSession:null,startNewSession:()=>{},addRecording:()=>{},replaceRecording:()=>{},getCurrentQuestionRecording:()=>void 0,goToNextQuestion:()=>{},goToPreviousQuestion:()=>!1,completeSession:async()=>{}});function a(e){let{children:t}=e,[o,a]=(0,r.useState)(null),c=async()=>{o&&a({...o,completedAt:new Date().toISOString()})};return(0,n.jsx)(i.Provider,{value:{currentSession:o,startNewSession:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length>0?Math.max(...e.map(e=>e.questionIndex))+1:0;a({id:"session_".concat(Date.now()),questionIndex:t,recordings:Array.isArray(e)?e:[]})},addRecording:e=>{if(o)try{s.D.saveRecording(e);let t=[...o.recordings];t.push(e);let n={...o,recordings:t};a(n)}catch(e){throw console.error("Failed to save recording:",e),e}},replaceRecording:e=>{if(o)try{let t=o.recordings.findIndex(t=>t.questionIndex===e.questionIndex);if(-1!==t){s.D.replaceRecording(t,e);let n=[...o.recordings];n[t]=e;let r={...o,recordings:n};a(r)}}catch(e){throw console.error("Failed to replace recording:",e),e}},getCurrentQuestionRecording:()=>{if(o)return o.recordings.find(e=>e.questionIndex===o.questionIndex)},goToNextQuestion:()=>{o&&a({...o,questionIndex:o.questionIndex+1})},goToPreviousQuestion:()=>!!o&&0!==o.questionIndex&&(a({...o,questionIndex:o.questionIndex-1}),!0),completeSession:c},children:t})}let c=()=>(0,r.useContext)(i)},2084:function(e,t,o){"use strict";o.d(t,{a:function(){return a},d:function(){return i}});var n=o(7437),r=o(2265);let s=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[o,i]=(0,r.useState)(null),[a,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(()=>{try{let e=document.cookie.split("; ").find(e=>e.startsWith("userId="));if(e){let t=e.split("=")[1];console.log("Found user cookie with ID:",t),fetch("/api/user/login_credentials?userId=".concat(t)).then(e=>e.json()).then(e=>{if(!e.error){let t={id:e.userId,username:e.userId,firstName:e.firstName,middleName:e.middleName||"",lastName:e.lastName,email:e.email,phone:e.phoneNumber,dob:e.dateOfBirth};i(t),localStorage.setItem("aliveHereUser",JSON.stringify(t))}c(!1)}).catch(()=>{c(!1)});return}let t=localStorage.getItem("aliveHereUser");t&&(console.log("Loading user from localStorage"),i(JSON.parse(t)))}catch(e){console.error("Error loading user from storage:",e)}finally{c(!1)}})()},[]);let l=e=>{console.log("Setting user with ID:",null==e?void 0:e.id),e&&!e.id&&console.error("User object is missing ID field"),i(e),e?localStorage.setItem("aliveHereUser",JSON.stringify(e)):localStorage.removeItem("aliveHereUser")},d=async()=>{try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){console.error("Error during logout:",e)}finally{l(null),document.cookie="userId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}},u=async e=>{try{l(e)}catch(e){throw console.error("Error registering user:",e),e}};return(0,n.jsx)(s.Provider,{value:{user:o,setUser:l,logout:d,isLoading:a,registerUser:u},children:t})},a=()=>{let e=(0,r.useContext)(s);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},9239:function(e,t,o){"use strict";o.d(t,{D:function(){return r}});class n{async saveRecording(e){try{this.recordings.push(e)}catch(e){throw console.error("Error saving recording:",e),Error((null==e?void 0:e.message)||"Failed to save recording")}}getSessionRecordings(){try{return this.recordings}catch(e){return console.error("Error getting recordings:",e),[]}}replaceRecording(e,t){try{this.recordings[e]=t}catch(e){throw console.error("Error replacing recording:",e),Error((null==e?void 0:e.message)||"Failed to replace recording")}}constructor(){this.recordings=[],this.RECORDINGS_KEY="recordings"}}let r=new n},9376:function(e,t,o){"use strict";var n=o(5475);o.o(n,"usePathname")&&o.d(t,{usePathname:function(){return n.usePathname}}),o.o(n,"useRouter")&&o.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4135)}),_N_E=e.O()}]);